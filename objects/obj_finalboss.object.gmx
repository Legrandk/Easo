<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_finalboss_walk_left</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//0: wandering, 1: searching, 2: attacking
state = 0;
shoot_range = 400;
//sight_range = 400;
can_shoot = true;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hp</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>100</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_shoot</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>true</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//0: iddle, 1: attacking, 2: attacking

//show_debug_message("boss state: " + string(state));

xo = x + 230;
yo = y + 135;

// change state ---------------------------------------------------------------------------------
switch( state ) {
   case 0: //iddle
      if ( instance_exists(obj_hero) ) {
        if ( !collision_line( xo,yo, obj_hero.x, obj_hero.y, obj_solid, false, false ) &amp;&amp;
             point_distance(xo, yo, obj_hero.x, obj_hero.y ) &lt; shoot_range
           ) { // lo veo?
           show_debug_message("LO VEO!!!!!!");
           state = 1;
        }
      }
      break;

    case 1: //attacking
      // sigo teniendolo al alcance?
      if ( !instance_exists(obj_hero) || 
            collision_line( xo, yo, obj_hero.x, obj_hero.y, obj_solid, false, false ) ||
            point_distance(xo,yo, obj_hero.x, obj_hero.y ) &gt; shoot_range
         ) {
         state = 0;
      }
    break;

    default:// nop
}

//---------------------------------------------------------------------------------------------

if ( 1 == state ) {
  if ( instance_exists(obj_hero) ) {
     if ( true == can_shoot ) { 
     show_debug_message("DISPAROOOOO");
       instance_create( xo, yo, obj_fireball );
       can_shoot = false;
       alarm[0] = boss_cooldown_ticks;
     //} else {
     //  move_towards_point( obj_hero.x, obj_hero.y, 4 );
     }
  }
}

// Wandering?
/*
if ( 0 == state ) {
  var ahead, left, right;

  if ( 0 == vspeed ) {

    ahead = place_free(x + hspeed, y);
    left = place_free( x, y + 4 );
    right = place_free( x, y - 4 );
  
    if ( !ahead &amp;&amp; !left &amp;&amp; !right ) { direction += 180; exit; }
    //while (true) {
      if ( ahead &amp;&amp; 0.05 &lt; random(1) ) { exit; }
      if ( left &amp;&amp; random(2) &lt; 1 ) { 
        direction = 270; 
        sprite_index = spr_gorila_walk_down;
        exit; 
      } else { 
        direction = 90; 
        sprite_index = spr_gorila_walk_up;
        exit; 
      }
      //if ( right &amp;&amp; random(2) &lt; 1 ) { direction = 90; exit; }
    //}

  } else {

    ahead = place_free(x, y + vspeed );
    left = place_free( x - 4, y );
    right = place_free( x + 4, y );
  
    if ( !ahead &amp;&amp; !left &amp;&amp; !right ) { vspeed = -vspeed; exit; }
    //while (true) {
      if ( ahead &amp;&amp; 0.05 &lt; random(1) ) { exit; }
      if ( left &amp;&amp; random(2) &lt; 1 ) { 
        direction = 0; 
        sprite_index = spr_gorila_walk_right;
        exit; 
      } else {
        direction = 180;
        sprite_index = spr_gorila_walk_left; 
        exit; 
      }
      //if ( right &amp;&amp; random(2) &lt; 1 ) { direction = 180; exit; }
    //}
  }
}
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet_hero">
      <action>
        <libid>1</libid>
        <id>201</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_create_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>-1</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>10</kind>
            <object>effect_bullet_hit</object>
          </argument>
          <argument>
            <kind>0</kind>
            <string>230</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>135</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>-1</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hp</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>-1</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>hp</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>155,155</point>
  </PhysicsShapePoints>
</object>
